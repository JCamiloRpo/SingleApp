let splash,login,registro,recuperar,inicio,reservar,confirmreserva,cortesfav,cortes,detallescorte,barberos,perfil,editperfil,secciones,btnIngresar,btnRegistrar,btnContraseña,btnRegistrarse,btnRecuperar,btnReservar,btnCortes,btnCortesfav,btnBarbero,btnRetReserva,btnConfirm,btnDetalle,btnRetCortes,btnEdit,btnCerrar,btnGuardar,btnsPerfil,btnsInicio,btnsLogin;function crearReferencias(){splash=document.getElementById("splash"),login=document.getElementById("login"),registro=document.getElementById("registro"),recuperar=document.getElementById("recuperar"),inicio=document.getElementById("inicio"),reservar=document.getElementById("reservar"),confirmreserva=document.getElementById("confirmreserva"),cortesfav=document.getElementById("cortesfav"),cortes=document.getElementById("cortes"),detallescorte=document.getElementById("detallescorte"),barberos=document.getElementById("barberos"),perfil=document.getElementById("perfil"),editperfil=document.getElementById("editperfil"),secciones=[splash,login,registro,recuperar,inicio,reservar,confirmreserva,cortesfav,cortes,detallescorte,barberos,perfil,editperfil],btnIngresar=document.getElementById("btnIngresar"),btnRegistrar=document.getElementById("btnRegistrar"),btnContraseña=document.getElementById("btnContraseña"),btnRegistrarse=document.getElementById("btnRegistrarse"),btnRecuperar=document.getElementById("btnRecuperar"),btnReserva=document.getElementById("btnReserva"),btnCortes=document.getElementById("btnCortes"),btnCortesfav=document.getElementById("btnCortesfav"),btnBarbero=document.getElementById("btnBarbero"),btnReservar=document.getElementById("btnReservar"),btnRetReserva=document.getElementById("btnRetReserva"),btnConfirm=document.getElementById("btnConfirm"),btnDetalle=document.getElementById("btnDetalle"),btnRetCortes=document.getElementById("btnRetCortes"),btnEdit=document.getElementById("btnEdit"),btnCerrar=document.getElementById("btnCerrar"),btnRetPerfil=document.getElementById("btnRetPerfil"),btnGuardar=document.getElementById("btnGuardar"),btnsPerfil=document.querySelectorAll(".btnPerfil"),btnsInicio=document.querySelectorAll(".btnInicio"),btnsLogin=document.querySelectorAll(".btnLogin")}function crearEventos(){btnRegistrar.addEventListener("click",irRegistro),btnContraseña.addEventListener("click",irRecuperar),btnRecuperar.addEventListener("click",irLogin),btnReserva.addEventListener("click",irReservar),btnCortes.addEventListener("click",irCortes),btnCortesfav.addEventListener("click",irCortesFav),btnBarbero.addEventListener("click",irBarberos),btnRetReserva.addEventListener("click",irReservar),btnConfirm.addEventListener("click",irInicio),btnDetalle.addEventListener("click",irDetalleCorte),btnRetCortes.addEventListener("click",irCortes),btnEdit.addEventListener("click",irEditPerfil),btnCerrar.addEventListener("click",irLogin),btnGuardar.addEventListener("click",irPerfil);for(var e=0;e<=5;e++)btnsPerfil[e].addEventListener("click",irPerfil);for(e=0;e<=4;e++)btnsInicio[e].addEventListener("click",irInicio);for(e=0;e<=1;e++)btnsLogin[e].addEventListener("click",irLogin)}function ocultarSecciones(){for(i in secciones)secciones[i].classList.add("ocultar")}function irLogin(){ocultarSecciones(),login.classList.remove("ocultar")}function irInicio(e){ocultarSecciones(),inicio.classList.remove("ocultar")}function irRegistro(e){e.preventDefault(),ocultarSecciones(),registro.classList.remove("ocultar")}function irRecuperar(e){e.preventDefault(),ocultarSecciones(),recuperar.classList.remove("ocultar")}function irReservar(e){e.preventDefault(),ocultarSecciones(),reservar.classList.remove("ocultar")}function irCortes(e){e.preventDefault(),ocultarSecciones(),cortes.classList.remove("ocultar")}function irCortesFav(e){e.preventDefault(),ocultarSecciones(),cortesfav.classList.remove("ocultar")}function irBarberos(e){e.preventDefault(),ocultarSecciones(),barberos.classList.remove("ocultar")}function irConfirmReserva(e){e.preventDefault(),ocultarSecciones(),confirmreserva.classList.remove("ocultar")}function irDetalleCorte(e){e.preventDefault(),ocultarSecciones(),detallescorte.classList.remove("ocultar")}function irEditPerfil(e){e.preventDefault(),ocultarSecciones(),editperfil.classList.remove("ocultar")}function irPerfil(e){e.preventDefault(),ocultarSecciones(),perfil.classList.remove("ocultar")}var corte_txt,barbero_txt,fecha_txt,hora_txt,userL_txt,passwL_txt,mensajeConfirmacion,nameR_txt,emailR_txt,userR_txt,passwR_txt,confirpasswR_txt,datosperfil;window.onload=()=>{crearReferencias(),setTimeout(irLogin,1500),crearEventos(),initSelect(),initLocal()};var contenedor=[],usuarios=[],current={};function initLocal(){usuarios=null==JSON.parse(localStorage.getItem("usuarios"))?usuarios=[]:JSON.parse(localStorage.getItem("usuarios")),initReservas(),initRegistro(),initLogin()}function initRegistro(){nameR_txt=document.getElementById("nameregistro"),emailR_txt=document.getElementById("emailregistro"),userR_txt=document.getElementById("userregistro"),passwR_txt=document.getElementById("passwregistro"),confirpasswR_txt=document.getElementById("confirpasswregistro"),datosperfil=document.getElementById("datosperfil"),btnRegistrarse.addEventListener("click",registrar)}function registrar(){if(""==nameR_txt.value||""==emailR_txt.value||""==userR_txt.value||""==passwR_txt.value||""==confirpasswR_txt.value)return alert("Debe llenar todos los campos"),!1;if(passwR_txt.value!=confirpasswR_txt.value)return alert("Las contraseñas no coinciden"),!1;var e={};for(var t in e.name=nameR_txt.value,e.email=emailR_txt.value,e.user=userR_txt.value,e.passw=passwR_txt.value,e.reserva=null,usuarios)if(usuarios[t].user==userR_txt.value)return alert("Ya existe ese nombre de usuario"),!1;usuarios.push(e),current=e,localStorage.setItem("usuarios",JSON.stringify(usuarios)),adecuarCampos(e),irInicio()}function adecuarCampos(e){var t='<img class="round" src="img/perfil.png" />';t+="<h3>"+e.name+"</h3>",t+="<h4>"+e.user+"</h4>",t+="<h4>"+e.email+"</h4>",t+='<div class="buttons"> <input id="btnCerrar" type="button" class="btn-second" value="Cerrar sesión"> </div>',t+='<div class="card_details" id="datosreserva">',t+="<h4>Reserva</h4>",null==e.reserva?t+='<p class="cl-white"> Aun no ha realizado ninguna reserva </p>':t+='<p class="cl-white">Su reserva con el babero'+e.reserva.barbero+" es para el corte "+e.reserva.corte+" ha sido agendada para el dia "+e.reserva.fecha+" a la hora "+e.reserva.hora+"<br> Con codigo de reserva: "+e.reserva.codigo+"</p>",t+="</div>",datosperfil.innerHTML=t,btnCerrar=document.getElementById("btnCerrar"),btnCerrar.addEventListener("click",irLogin),nameR_txt.value="",emailR_txt.value="",userR_txt.value="",passwR_txt.value="",confirpasswR_txt.value="",userL_txt.value=e.user,passwL_txt.value=""}function initLogin(){userL_txt=document.getElementById("userlogin"),passwL_txt=document.getElementById("passwlogin"),btnIngresar.addEventListener("click",iniciarSesion)}function iniciarSesion(){if(""==userL_txt.value||""==passwL_txt.value)return alert("Ingrese usuario y contraseña"),!1;for(var e in usuarios)if(usuarios[e].user==userL_txt.value&&usuarios[e].passw==passwL_txt.value)return adecuarCampos(usuarios[e]),current=usuarios[e],irInicio(),!0;alert("Usuario y/o contraseña incorrectos")}function initReservas(){corte_txt=document.getElementById("corte"),barbero_txt=document.getElementById("barbero"),fecha_txt=document.getElementById("date"),hora_txt=document.getElementById("time"),mensajeConfirmacion=document.getElementById("mensajeConfirmacion"),btnReservar.addEventListener("click",almacenarReserva)}function almacenarReserva(){if(null==current.reserva)if(""!=corte_txt.value&&""!=barbero_txt.value&&""!=fecha_txt.value&&""!=hora_txt.value){var e={};for(var t in e.corte=corte_txt.value,e.barbero=barbero_txt.value,e.fecha=fecha_txt.value,e.hora=hora_txt.value,e.codigo=1234,current.reserva=e,usuarios)if(usuarios[t].user==current.user)return usuarios[t]=current,adecuarCampos(current),irConfirmReserva(e),localStorage.setItem("usuarios",JSON.stringify(usuarios)),!0}else alert("Todos los campos son requeridos");else alert("No puede tener mas de una reserva")}function irConfirmReserva(e){mensajeConfirmacion.innerHTML="Su reserva con el babero"+e.barbero+" es para el corte "+e.corte+" ha sido agendada para el dia "+e.fecha+" a la hora "+e.hora+"<br> Con codigo de reserva: "+e.codigo,ocultarSecciones(),confirmreserva.classList.remove("ocultar")}function initSelect(){const e=document.querySelector("#sltCorte"),t=document.querySelector("#optCorte"),r=document.querySelector("#sltCorte .contenido-select"),n=document.querySelector("#corte");document.querySelectorAll("#optCorte > .opcion").forEach(a=>{a.addEventListener("click",a=>{a.preventDefault(),r.innerHTML=a.currentTarget.innerHTML,e.classList.toggle("active"),t.classList.toggle("active"),n.value=a.currentTarget.querySelector(".titulo").innerText})}),e.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active")});const a=document.querySelector("#sltBarbero"),o=document.querySelector("#optBarbero"),s=document.querySelector("#sltBarbero .contenido-select"),i=document.querySelector("#barbero");document.querySelectorAll("#optBarbero > .opcion").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),s.innerHTML=e.currentTarget.innerHTML,a.classList.toggle("active"),o.classList.toggle("active"),i.value=e.currentTarget.querySelector(".titulo").innerText})}),a.addEventListener("click",()=>{a.classList.toggle("active"),o.classList.toggle("active")})}